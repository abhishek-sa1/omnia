{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "Groups": {
      "type": "object",
      "patternProperties": {
        "^grp([1-9][0-9]?|0)$": {
          "type": "object",
          "properties": {
            "location_id": {
              "type": "string",
              "description": "Scalable unit and rack number range is 0-99. Format: SU-<n>.RACK-<n>",
              "pattern": "^(SU-\\d{1,2}\\.RACK-\\d{1,2})$"
            },
            "cluster_name": {
              "type": "string",
              "pattern": "^$|^[a-zA-Z0-9_]+$",
              "description": "Name of the cluster. Mandatory for service and compute kubernetes roles like 'service_kube_node', 'kube_node'."
            },
            "parent": {
              "type": "string",
              "pattern": "^[a-zA-Z0-9,]*$",
              "description": "List of service tag of associated active service node(s). This field will be empty for group of nodes which is associated with 'service_kube_node', 'kube_node', 'slurm_control_plane', 'slurm_node', 'login_node', 'compiler_node'."
            },
            "architecture": {
                "type": "string",
                "description": "Architecture of the nodes - x86_64 or aarch64",
                "enum": ["x86_64", "aarch64"],
                "required": ["architecture"]
            }
          },
          "required": [
            "location_id",
            "architecture"
          ]
        }
      },
      "additionalProperties": false
    },
    "Roles": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the role, can be any of the following Omnia defined roles.",
            "enum": [
              "default",
              "service_kube_node",
              "kube_node",
              "slurm_control_node",
              "slurm_node",
              "login_node",
              "compiler_node"
            ]
          },
          "groups": {
            "type": "array",
            "description": "List of groups defined by the user",
            "items": {
              "type": "string",
              "pattern": "^grp\\d{1,2}$"
            },
            "minItems": 1,
            "uniqueItems": true
          }
        },
        "required": [
          "name",
          "groups"
        ]
      },
      "minItems": 1,
      "uniqueItems": true,
      "maxItems": 100
    }
  },
  "required": [
    "groups",
    "functional_groups"
  ]
}
