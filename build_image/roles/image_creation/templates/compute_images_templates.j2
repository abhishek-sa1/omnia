openchami_work_dir: "{{ openchami_work_dir }}"
rhel_base_compute_image_name: "rhel-{{ item.key }}"
rhel_base_compute_image: "{{ oim_node_name }}/rhel-{{ item.key }}"
rhel_repo: "{{ rhel_repos }}"
cluster_name: "{{ oim_node_name }}"
cluster_domain: "{{ domain_name }}"
group_name: "{{ item.key }}"

rhel_repos:
{% for repo in rhel_repos %}
  - { name: '{{ repo.name }}', url: '{{ repo.url }}', gpg: '{{ repo.gpg }}' }
{% endfor %}

base_compute_image_packages:
{% for pkg in packages %}
  - {{ pkg }}
{% endfor %}

# Commands for this role
{% set command_var = functional_group + '_compute_commands' %}
{% set commands_list = lookup('vars', command_var, default=[]) %}
base_compute_image_commands:
{% if commands_list | length > 0 %}
{% for cmd in commands_list %}
  - "{{ cmd }}"
{% endfor %}
{% else %}
  []
{% endif %}
