# Copyright 2025 Dell Inc. or its subsidiaries. All Rights Reserved.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

---

auth_service_directories: "{{ omnia_nfs_share }}/authservice"


# Usage: include_security_config.yml
security_config_file: "{{ hostvars['localhost']['input_project_dir'] }}/security_config.yml"
security_config_syntax_fail_msg: "Failed. Syntax errors present in security_config.yml. Fix errors and re-run playbook again."

# Usage: configure_slapd_conf.yml
slapd_conf_dest: "{{ auth_service_directories }}/slapd.conf"
file_permissions_644: "0644"

# Usage: configure_bootstrap_ldif.yml
bootstrap_ldif_dest: "{{ auth_service_directories }}/bootstrap.ldif"

# Usage: configure_ldap_conf.yml
ldap_conf_dest: "{{ auth_service_directories }}/ldap.conf"
# Common vars
user_home_dir: "/home"
file_permission: "0600"
sasl_nocanon_regxp: "SASL_NOCANON\ton"
sasl_nacanon_replace1: "SASL_NOCANON\ton\nBASE\t{{ reqd_domain_name }}"
sasl_nacanon_replace2: "SASL_NOCANON\ton\nURI\tldap://{{ hostvars[groups['auth_server'][0]]['ansible_env'].SSH_CONNECTION.split(' ')[2] }}"
sasl_nacanon_replace3: "SASL_NOCANON\ton\nTLS_CACERT\t{{ tls_cert_path }}"
sasl_nacanon_replace4: "SASL_NOCANON\ton\nURI\tldap://{{ hostvars[groups['auth_server'][0]]['ansible_env'].SSH_CONNECTION.split(' ')[2] }}:636"
file_mode: "0644"
oim_certs_dir: "/opt/omnia/security/certs/"

# Usage: configure_sssd_conf.yml
sssd_conf_dest: "{{ auth_service_directories }}/sssd.conf"

# Usage: generate_ldap_password_hashes.yml
hashing_python_file: "{{ role_path }}/files/generate_hash.py"
python_version: "{{ ansible_python_interpreter }}"